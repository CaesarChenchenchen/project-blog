<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Tianxiao &amp; Ling">
<meta name="dcterms.date" content="2023-09-27">

<title>Working Sample - House Price Prediction, Philadelphia</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Working Sample</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/CrumpLab/quartoCourseBlog" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/MattCrumpLab" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">House Price Prediction, Philadelphia</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">real estate</div>
                <div class="quarto-category">code</div>
                <div class="quarto-category">analysis</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Tianxiao &amp; Ling </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 27, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>In light of recent concerns about the accuracy of Zillow’s housing market predictions, our team has undertaken an effort to enhance house price prediction in Philadelphia. Our primary goal is to contribute to more advanced decision-making for the City of Philadelphia by leveraging machine learning techniques. To achieve improved accuracy and generalizability, we have taken a comprehensive approach. We’ve incorporated various indicators across different fields to ensure that our predictions align more closely with real-world conditions. By doing so, we aim to provide a more accurate representation of Philadelphia’s housing market, which can be valuable for both current decision-making and future planning. This report serves as a detailed account of our approach and methods. It emphasizes the significance of understanding the local context and the seamless integration of this knowledge with pre-existing data. Our overarching objective is to provide a richer context and a more precise understanding of Philadelphia’s housing landscape, fostering informed decision-making for the present and future.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"https://raw.githubusercontent.com/mafichman/musa_5080_2023/main/Midterm/data/2023/studentData.geojson"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>variables <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'objectid'</span>,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>               <span class="st">'census_tract'</span>,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>               <span class="st">'parcel_shape'</span>,</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>               <span class="st">'building_code'</span>,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>               <span class="st">'quality_grade'</span>,</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>               <span class="st">'central_air'</span>,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>               <span class="st">'depth'</span>,</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>               <span class="st">'exempt_land'</span>,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>               <span class="st">'exterior_condition'</span>,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>               <span class="st">'fireplaces'</span>,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>               <span class="st">'frontage'</span>,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>               <span class="st">'fuel'</span>,</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>               <span class="st">'garage_spaces'</span>,</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>               <span class="st">'garage_type'</span>,</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>               <span class="st">'general_construction'</span>,</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>               <span class="st">'interior_condition'</span>,</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>               <span class="st">'number_of_bathrooms'</span>,</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>               <span class="st">'number_of_bedrooms'</span>,</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>               <span class="st">'number_of_rooms'</span>,</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>               <span class="st">'number_stories'</span>,</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>               <span class="st">'off_street_open'</span>,</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>               <span class="st">'sale_price'</span>,</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>               <span class="st">'year_built'</span>,</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>               <span class="st">'toPredict'</span>)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>f_df <span class="ot">&lt;-</span> data[, variables]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="data-clean" class="level1">
<h1>Data Clean</h1>
<p>To make the data available for modeling, we make the data clean process. This step includes the initial data exploration, outlier and N/A value handling and the join with other relevant dataset. ## Data Exploration First, we make an exploration for the variables that describe the situation of house. The frequency of each variable basically show the trend of normal distribution, and the situation prove support for the assumption of the regression model we choose later.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>ex_his <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(f_df, <span class="fu">aes</span>(<span class="at">x =</span> exterior_condition)) <span class="sc">+</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">fill =</span> <span class="st">"grey"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"exterior"</span>, <span class="at">x =</span> <span class="st">"Level"</span>, <span class="at">y =</span> <span class="st">"Frequency"</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>in_his <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(f_df, <span class="fu">aes</span>(<span class="at">x =</span> interior_condition)) <span class="sc">+</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">fill =</span> <span class="st">"grey"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"interior"</span>, <span class="at">x =</span> <span class="st">"Level"</span>, <span class="at">y =</span> <span class="st">"Frequency"</span>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>qua_his <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(f_df, <span class="fu">aes</span>(<span class="at">x =</span> quality_grade)) <span class="sc">+</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">stat=</span><span class="st">'count'</span>,<span class="at">fill =</span> <span class="st">"grey"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"quality"</span>, <span class="at">x =</span> <span class="st">"Level"</span>, <span class="at">y =</span> <span class="st">"Frequency"</span>)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>par_his <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(f_df, <span class="fu">aes</span>(<span class="at">x =</span> parcel_shape)) <span class="sc">+</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">stat=</span><span class="st">'count'</span>,<span class="at">fill =</span> <span class="st">"grey"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"parcel"</span>, <span class="at">x =</span> <span class="st">"Level"</span>, <span class="at">y =</span> <span class="st">"Frequency"</span>)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>nos_his <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(f_df, <span class="fu">aes</span>(<span class="at">x =</span> number_stories)) <span class="sc">+</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">stat=</span><span class="st">'count'</span>,<span class="at">fill =</span> <span class="st">"grey"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"num_story"</span>, <span class="at">x =</span> <span class="st">"Level"</span>, <span class="at">y =</span> <span class="st">"Frequency"</span>)</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>nobed_his <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(f_df, <span class="fu">aes</span>(<span class="at">x =</span> number_of_bedrooms)) <span class="sc">+</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">stat=</span><span class="st">'count'</span>,<span class="at">fill =</span> <span class="st">"grey"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"num_bed"</span>, <span class="at">x =</span> <span class="st">"Level"</span>, <span class="at">y =</span> <span class="st">"Frequency"</span>)</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>nobath_his <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(f_df, <span class="fu">aes</span>(<span class="at">x =</span> number_of_bathrooms)) <span class="sc">+</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">stat=</span><span class="st">'count'</span>,<span class="at">fill =</span> <span class="st">"grey"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"num_bath"</span>, <span class="at">x =</span> <span class="st">"Level"</span>, <span class="at">y =</span> <span class="st">"Frequency"</span>)</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>gencon_his <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(f_df, <span class="fu">aes</span>(<span class="at">x =</span> general_construction)) <span class="sc">+</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">stat=</span><span class="st">'count'</span>,<span class="at">fill =</span> <span class="st">"grey"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"num_construction"</span>, <span class="at">x =</span> <span class="st">"Level"</span>, <span class="at">y =</span> <span class="st">"Frequency"</span>)</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(ex_his, in_his, qua_his, par_his, nos_his,nobed_his, nobath_his,gencon_his, <span class="at">ncol =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="mid_initial_1010-copy-copy_files/figure-html/histogram for categorical variables-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>And when we focus on the distribution of sale price and other variables, we find that the data has many outlier with much larger value. To decrease the effect of outlier to the model performance, we make the assumption that the outlier comes from the record mistake, and set the maximum limitation for these outliers. Also, due to some varibles lack large amounts of data (we define the large amount as more than 75% lack), we choose to ignore these variables to guarantee objectivity as far as possible.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>sale_box <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(f_df, <span class="fu">aes</span>(<span class="at">y =</span> sale_price)) <span class="sc">+</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Boxplot of sale price"</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"sale price"</span>,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Value"</span>)<span class="sc">+</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),  </span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>),  </span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>ostrt_box <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(f_df, <span class="fu">aes</span>(<span class="at">y =</span> off_street_open)) <span class="sc">+</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Boxplot of off_street_open"</span>,</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"offstreet_space"</span>,</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Value"</span>)<span class="sc">+</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),  </span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>),  </span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>dep_box <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(f_df, <span class="fu">aes</span>(<span class="at">y =</span> depth)) <span class="sc">+</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Boxplot of depth"</span>,</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"depth"</span>,</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Value"</span>)<span class="sc">+</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),  </span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>),  </span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>fr_box <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(f_df, <span class="fu">aes</span>(<span class="at">y =</span> frontage)) <span class="sc">+</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Boxplot of frontage"</span>,</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"frontage"</span>,</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Value"</span>)<span class="sc">+</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),  </span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>),  </span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(sale_box, ostrt_box, dep_box, fr_box, <span class="at">ncol =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="mid_initial_1010-copy-copy_files/figure-html/the boxplot for continus variable-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>df_pro <span class="ot">&lt;-</span> f_df</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>df_pro<span class="sc">$</span>frontage <span class="ot">&lt;-</span> <span class="fu">pmin</span>(df_pro<span class="sc">$</span>frontage, <span class="dv">500</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>df_pro<span class="sc">$</span>depth <span class="ot">&lt;-</span> <span class="fu">pmin</span>(df_pro<span class="sc">$</span>depth, <span class="dv">600</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>df_pro<span class="sc">$</span>sale_price <span class="ot">&lt;-</span> <span class="fu">pmin</span>(df_pro<span class="sc">$</span>sale_price,<span class="dv">4000000</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>df_pro<span class="sc">$</span>off_street_open <span class="ot">&lt;-</span> <span class="fu">pmin</span>(df_pro<span class="sc">$</span>off_street_open,<span class="dv">10000</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>df_pro<span class="sc">$</span>number_of_bedrooms <span class="ot">&lt;-</span> <span class="fu">pmin</span>(df_pro<span class="sc">$</span>number_of_bedrooms,<span class="dv">10</span>)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>df_pro<span class="sc">$</span>number_of_bathrooms <span class="ot">&lt;-</span> <span class="fu">pmin</span>(df_pro<span class="sc">$</span>number_of_bathrooms,<span class="dv">5</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>df_pro <span class="ot">&lt;-</span> <span class="fu">subset</span>(df_pro,<span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(number_of_rooms,general_construction,exempt_land,fireplaces))</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>df_pro<span class="sc">$</span>central_air[<span class="fu">is.na</span>(df_pro<span class="sc">$</span>central_air)] <span class="ot">&lt;-</span> <span class="st">'N'</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>df_pro<span class="sc">$</span>depth[<span class="fu">is.na</span>(df_pro<span class="sc">$</span>depth)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>df_pro <span class="ot">&lt;-</span> df_pro <span class="sc">%&gt;%</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(exterior_condition))<span class="sc">%&gt;%</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(exterior_condition))<span class="sc">%&gt;%</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(interior_condition))<span class="sc">%&gt;%</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(number_of_bedrooms))<span class="sc">%&gt;%</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(number_stories))<span class="sc">%&gt;%</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(number_of_bathrooms))<span class="sc">%&gt;%</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(off_street_open))<span class="sc">%&gt;%</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(garage_spaces))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="multi-dimensional-data" class="level1">
<h1>Multi-dimensional data</h1>
<p>In order to develop an enhanced understanding on the housing market, we acquired data that looks beyond the house itself, we gathered data on the external characteristics including the houses proximity to public facilities like urban corridors, private schools, green space. We also examined the economic and racial demographics of the geogrhic area each home is located in.</p>
<section id="census-data" class="level2">
<h2 class="anchored" data-anchor-id="census-data">Census Data</h2>
<p>The first source used was from the U.S Census Bureau - specifically the American Community Survey (ACS) dataset - we used data from the 2021 five year ACS survey, which is the most recent ACS five year survey data available.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>tracts21 <span class="ot">&lt;-</span>  </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_acs</span>(<span class="at">geography =</span> <span class="st">"tract"</span>,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">variables =</span> <span class="fu">c</span>(<span class="st">"B01001_001E"</span>, <span class="co"># ACS total Pop estimate</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>              <span class="st">'B02001_002E'</span>, <span class="co"># Estimate!!Total:!!White alone</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>              <span class="st">'B02001_003E'</span>, <span class="co"># Estimate!!Total:!!Black or African American alone</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>              <span class="st">'B02001_005E'</span>, <span class="co"># Estimate!!Total:!!Asian alone</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>              <span class="st">'B19013A_001E'</span>,<span class="co"># Median household income White alone</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>              <span class="st">'B19013B_001E'</span>,<span class="co"># Median household income Black alone</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>              <span class="st">'B19013D_001E'</span>,<span class="co"># Median household income Asian alone</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>              <span class="st">'B19013_001E'</span>, <span class="co"># Median household income </span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>              <span class="st">'B01002_001E'</span>, <span class="co"># Median Age by Sex </span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>              <span class="st">"B25002_001E"</span>, <span class="co"># Estimate of total housing units</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>              <span class="st">"B25002_003E"</span>, <span class="co"># Number of vacant housing units</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>              <span class="st">"B06009_006E"</span>, <span class="co"># Total graduate or professional degree</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>              <span class="st">"B15001_050E"</span>,</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>              <span class="st">"B15001_009E"</span>,</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>              <span class="st">"B25058_001E"</span>,</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>              <span class="st">"B06012_002E"</span>,</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>              <span class="st">'B25105_001E'</span>, <span class="co"># Median monthly housing costs </span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>              <span class="st">'B25037_001E'</span>, <span class="co"># Median year structure built --!!Total</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>              <span class="st">'B10058_002E'</span>, <span class="co"># Total:!!In labor force</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>              <span class="st">'B10058_007E'</span>, <span class="co"># Not in labor force</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>              <span class="st">'B08141_017E'</span>, <span class="co"># Public transportation:!!No vehicle available</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>              <span class="st">'B08141_018E'</span>, <span class="co"># Public transportation:!!1 vehicle available </span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>              <span class="st">'B09002_002E'</span>, <span class="co"># OWN CHILDREN UNDER 18 YEARS married family</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>              <span class="st">'B09002_015E'</span>, <span class="co"># Female householder</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>              <span class="st">'B14001_004E'</span>), <span class="co"># Enrolled in kindergarten </span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>          <span class="at">year=</span><span class="dv">2021</span>, <span class="at">state=</span><span class="dv">42</span>,</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>          <span class="at">county=</span><span class="dv">101</span>, <span class="at">geometry=</span><span class="cn">TRUE</span>, <span class="at">output =</span> <span class="st">"wide"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="st">'ESRI:102728'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">TotalPop =</span> B01001_001E, </span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>         <span class="at">White =</span> B02001_002E,</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>         <span class="at">Black =</span> B02001_003E,</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>         <span class="at">Asian =</span> B02001_005E,</span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>         <span class="at">MedHHInc_White =</span> B19013A_001E,</span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>         <span class="at">MedHHInc_Black =</span> B19013B_001E,</span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>         <span class="at">MedHHInc_Asian =</span> B19013D_001E,</span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>         <span class="at">MedHHInc =</span> B19013_001E,</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>         <span class="at">Median_Age_bysex =</span> B01002_001E,</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>         <span class="at">Total_Housing_Units =</span> B25002_001E,</span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>         <span class="at">Vacant_Housing_Units =</span> B25002_003E,</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>         <span class="at">Total_Graduate_Prof_Degree =</span> B06009_006E,</span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>         <span class="at">FemaleBachelors =</span> B15001_050E, </span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>         <span class="at">MaleBachelors =</span> B15001_009E,</span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>         <span class="at">MedRent =</span> B25058_001E,</span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>         <span class="at">TotalPoverty =</span> B06012_002E,</span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>         <span class="at">Med_mon_hscst =</span> B25105_001E,</span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>         <span class="at">Med_built_year =</span> B25037_001E,</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>         <span class="at">Lab_force =</span> B10058_002E,</span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>         <span class="at">no_lav_force =</span> B10058_007E,</span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>         <span class="at">no_pub_trans =</span> B08141_017E,</span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>         <span class="at">one_pub_trans =</span> B08141_018E,</span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a>         <span class="at">own_child =</span> B09002_002E,</span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>         <span class="at">own_child_fe =</span> B09002_015E,</span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a>         <span class="at">enroll_kinder =</span> B14001_004E)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Getting data from the 2017-2021 5-year ACS</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Downloading feature geometry from the Census website.  To cache shapefiles for use in future sessions, set `options(tigris_use_cache = TRUE)`.</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>tracts21 <span class="ot">&lt;-</span> tracts21[, <span class="sc">!</span><span class="fu">grepl</span>(<span class="st">"M$"</span>, <span class="fu">names</span>(tracts21))]</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>mean_in_w <span class="ot">&lt;-</span> <span class="fu">mean</span>(tracts21<span class="sc">$</span>MedHHInc_White,<span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>tracts21<span class="sc">$</span>MedHHInc_White[<span class="fu">is.na</span>(tracts21<span class="sc">$</span>MedHHInc_White)] <span class="ot">&lt;-</span> mean_in_w</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>mean_in_b <span class="ot">&lt;-</span> <span class="fu">mean</span>(tracts21<span class="sc">$</span>MedHHInc_Black,<span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>tracts21<span class="sc">$</span>MedHHInc_Black[<span class="fu">is.na</span>(tracts21<span class="sc">$</span>MedHHInc_Black)] <span class="ot">&lt;-</span> mean_in_b</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>mean_in_a <span class="ot">&lt;-</span> <span class="fu">mean</span>(tracts21<span class="sc">$</span>MedHHInc_Asian,<span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>tracts21<span class="sc">$</span>MedHHInc_Asian[<span class="fu">is.na</span>(tracts21<span class="sc">$</span>MedHHInc_Asian)] <span class="ot">&lt;-</span> mean_in_a</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>mean_in <span class="ot">&lt;-</span> <span class="fu">mean</span>(tracts21<span class="sc">$</span>MedHHInc,<span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>tracts21<span class="sc">$</span>MedHHInc[<span class="fu">is.na</span>(tracts21<span class="sc">$</span>MedHHInc)] <span class="ot">&lt;-</span> mean_in</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>med_age <span class="ot">&lt;-</span> <span class="fu">mean</span>(tracts21<span class="sc">$</span>Median_Age_bysex,<span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>tracts21<span class="sc">$</span>Median_Age_bysex[<span class="fu">is.na</span>(tracts21<span class="sc">$</span>Median_Age_bysex)] <span class="ot">&lt;-</span> med_age</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>med_rent <span class="ot">&lt;-</span> <span class="fu">mean</span>(tracts21<span class="sc">$</span>MedRent,<span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>tracts21<span class="sc">$</span>MedRent[<span class="fu">is.na</span>(tracts21<span class="sc">$</span>MedRent)] <span class="ot">&lt;-</span> med_rent</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>mean_medmonhh <span class="ot">&lt;-</span> <span class="fu">mean</span>(tracts21<span class="sc">$</span>Med_mon_hscst,<span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>tracts21<span class="sc">$</span>Med_mon_hscst[<span class="fu">is.na</span>(tracts21<span class="sc">$</span>Med_mon_hscst)] <span class="ot">&lt;-</span> mean_medmonhh</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>med_b_yr <span class="ot">&lt;-</span> <span class="fu">median</span>(tracts21<span class="sc">$</span>Med_built_year,<span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>tracts21<span class="sc">$</span>Med_built_year[<span class="fu">is.na</span>(tracts21<span class="sc">$</span>Med_built_year)] <span class="ot">&lt;-</span> med_b_yr</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>df_pro <span class="ot">&lt;-</span> df_pro <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="st">'ESRI:102728'</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>tracts21 <span class="ot">&lt;-</span> tracts21 <span class="sc">%&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="st">'ESRI:102728'</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>hh_tract <span class="ot">&lt;-</span> <span class="fu">st_join</span>(df_pro,tracts21, <span class="at">join =</span> st_within)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>hh_tract <span class="ot">&lt;-</span> hh_tract <span class="sc">%&gt;%</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="st">'ESRI:102728'</span>)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>hh_tract <span class="ot">&lt;-</span> <span class="fu">subset</span>(hh_tract,<span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(central_air,fuel,garage_type,Asian,MedHHInc_White,MedHHInc_Black,MedHHInc_Asian,FemaleBachelors,MaleBachelors,Med_built_year,one_pub_trans,no_lav_force))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="get-data-from-open-data-philly" class="level2">
<h2 class="anchored" data-anchor-id="get-data-from-open-data-philly">Get Data from Open Data Philly</h2>
<p>OpenData Philly is an open source website that provides a catalog of free data, officially sponsored by the City of Philadelphia. The data provided by the city and other organizations allows us to collect a wide variety of information we can utilize to categorize, describe, and develop a profile for key geographic characteristics which might impact price. And we use the following dataset as our potential variable:</p>
<ul>
<li><p><a href="https://opendata.arcgis.com/datasets/f43e5f92d34e41249e7a11f269792d11_0.geojson">Commercial Corridors</a> – dataset record the location of commercial corridors in Philadelphia.</p></li>
<li><p><a href="https://opendata.arcgis.com/datasets/d46a7e59e2c246c891fbee778759717e_0.geojson">School</a> – dataset the record the location of school.</p></li>
<li><p><a href="https://opendata.arcgis.com/datasets/b3c133c3b15d4c96bcd4d5cc09f19f4e_0.geojson">City Facilities</a> – dataset record the different type of ameneties.</p></li>
<li><p><a href="https://raw.githubusercontent.com/azavea/geo-data/master/Neighborhoods_Philadelphia/Neighborhoods_Philadelphia.geojson">Neighborhhod-Philadelphia</a> – planning districts will be used as a proxy for neighborhoods.</p></li>
<li><p><a href="https://phl.carto.com/api/v2/sql?filename=incidents_part1_part2&amp;format=csv&amp;q=SELECT%20*%20,%20ST_Y(the_geom)%20AS%20lat,%20ST_X(the_geom)%20AS%20lng%20FROM%20incidents_part1_part2%20WHERE%20dispatch_date_time%20%3E=%20%272021-01-01%27%20AND%20dispatch_date_time%20%3C%20%272022-01-01%27">Crime</a> – dataset records crime location in Philadelphia with detailed type.</p></li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>boundary <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"https://opendata.arcgis.com/datasets/405ec3da942d4e20869d4e1449a2be48_0.geojson"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="st">'ESRI:102728'</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>Commercial_Corridors <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"https://opendata.arcgis.com/datasets/f43e5f92d34e41249e7a11f269792d11_0.geojson"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="st">'ESRI:102728'</span>)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>crime <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'https://phl.carto.com/api/v2/sql?filename=incidents_part1_part2&amp;format=csv&amp;q=SELECT%20*%20,%20ST_Y(the_geom)%20AS%20lat,%20ST_X(the_geom)%20AS%20lng%20FROM%20incidents_part1_part2%20WHERE%20dispatch_date_time%20%3E=%20%272021-01-01%27%20AND%20dispatch_date_time%20%3C%20%272022-01-01%27'</span>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>Crime <span class="ot">&lt;-</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  crime <span class="sc">%&gt;%</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(text_general_code <span class="sc">==</span> <span class="st">"Aggravated Assault Firearm"</span>,</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>           lat <span class="sc">&gt;</span> <span class="sc">-</span><span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(lat, lng) <span class="sc">%&gt;%</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="st">"lng"</span>, <span class="st">"lat"</span>), <span class="at">crs =</span> <span class="st">"EPSG:4326"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_transform</span>(<span class="st">'ESRI:102728'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>()</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>School <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"https://opendata.arcgis.com/datasets/d46a7e59e2c246c891fbee778759717e_0.geojson"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="st">'ESRI:102728'</span>)</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>CityFacilities <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"https://opendata.arcgis.com/datasets/b3c133c3b15d4c96bcd4d5cc09f19f4e_0.geojson"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="st">'ESRI:102728'</span>)</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>nhoods <span class="ot">&lt;-</span> </span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_read</span>(<span class="st">'https://raw.githubusercontent.com/azavea/geo-data/master/Neighborhoods_Philadelphia/Neighborhoods_Philadelphia.geojson'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="st">'ESRI:102728'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>hh_tract <span class="ot">&lt;-</span> <span class="fu">st_join</span>(hh_tract, nhoods, <span class="at">join =</span> st_within)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="school-private" class="level3">
<h3 class="anchored" data-anchor-id="school-private">School: Private</h3>
<p>Homes located in proximity to reputable educational institutions, particularly private schools, often enjoy increased desirability and can fetch higher prices in the real estate market. As a result, we assess the presence of private schools within a 0.25-mile radius of each house. This distance allows for convenient commuting for students and parents while providing access to a variety of educational activities and resources.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>School <span class="ot">&lt;-</span> School <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(OBJECTID,GRADE_LEVEL,TYPE_SPECIFIC)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>School_Private <span class="ot">&lt;-</span> School <span class="sc">%&gt;%</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(TYPE_SPECIFIC <span class="sc">==</span> <span class="st">"PRIVATE"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>() <span class="sc">%&gt;%</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(geometry)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>hh_tract<span class="sc">$</span>school_1320 <span class="ot">&lt;-</span> hh_tract <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_buffer</span>(<span class="dv">1320</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aggregate</span>(<span class="fu">mutate</span>(Crime, <span class="at">counter =</span> <span class="dv">1</span>),., sum) <span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pull</span>(counter)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>hh_tract<span class="sc">$</span>school_1320[<span class="fu">is.na</span>(hh_tract<span class="sc">$</span>school_1320)] <span class="ot">&lt;-</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="distance-to-commercial-corridors" class="level3">
<h3 class="anchored" data-anchor-id="distance-to-commercial-corridors">Distance to Commercial Corridors</h3>
<p>The proximity to commercial corridors can be a significant factor in attracting more residents to move in. This proximity offers residents the convenience of having grocery stores, restaurants, shops, and other amenities nearby. Additionally, it enhances walkability and fosters more economic activity, contributing to a livelier neighborhood. Therefore, we calculate the distance between each house and the nearest commercial corridor. However, there might also be potential risks of noise, traffic, and crimes, which may influence people’s decision-making process.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>nearest_dists <span class="ot">&lt;-</span> <span class="fu">st_distance</span>(hh_tract, Commercial_Corridors)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>closest_distances <span class="ot">&lt;-</span> <span class="fu">apply</span>(nearest_dists, <span class="dv">1</span>, min)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>hh_tract <span class="ot">&lt;-</span> hh_tract <span class="sc">%&gt;%</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dis_cc =</span> closest_distances) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="crime-aggravated-assault-within-0.250.125-miles" class="level3">
<h3 class="anchored" data-anchor-id="crime-aggravated-assault-within-0.250.125-miles">Crime: Aggravated Assault within 0.25/0.125 miles</h3>
<p>Crime is often a crucial neighborhood indicator. Homebuyers frequently prefer properties situated in neighborhoods with lower crime rates, as it ensures a safer and more desirable living environment. By calculating crime counts within different buffer distances of 0.25 miles and 0.125 miles from each house, we aim to account for the potential influence of varying crime ranges on home values. Then, we utilize a k-nearest neighbor approach to provide an additional perspective on the relationship between crime and home values, which calculates the distance between each house and the nearest crime incidents, considering multiple nearest neighbors (k) ranging from 1 to 5. This helps us understand how different levels of crime proximity might affect home values.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>hh_tract<span class="sc">$</span>crimes.Buffer_660 <span class="ot">&lt;-</span> hh_tract <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_buffer</span>(<span class="dv">660</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aggregate</span>(<span class="fu">mutate</span>(Crime, <span class="at">counter =</span> <span class="dv">1</span>),., sum) <span class="sc">%&gt;%</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pull</span>(counter)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>hh_tract<span class="sc">$</span>crimes.Buffer_1320 <span class="ot">&lt;-</span> hh_tract <span class="sc">%&gt;%</span> </span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_buffer</span>(<span class="dv">1320</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aggregate</span>(<span class="fu">mutate</span>(Crime, <span class="at">counter =</span> <span class="dv">1</span>),., sum) <span class="sc">%&gt;%</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pull</span>(counter)</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>hh_tract<span class="sc">$</span>crimes.Buffer_660[<span class="fu">is.na</span>(hh_tract<span class="sc">$</span>crimes.Buffer_660)] <span class="ot">&lt;-</span> <span class="dv">0</span> </span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>hh_tract<span class="sc">$</span>crimes.Buffer_1320[<span class="fu">is.na</span>(hh_tract<span class="sc">$</span>crimes.Buffer_1320)] <span class="ot">&lt;-</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Nearest Neighbor Feature</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>hh_tract <span class="ot">&lt;-</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  hh_tract <span class="sc">%&gt;%</span> </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">crime_nn1 =</span> <span class="fu">nn_function</span>(<span class="fu">st_coordinates</span>(hh_tract), </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">st_coordinates</span>(Crime), <span class="at">k =</span> <span class="dv">1</span>),</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">crime_nn2 =</span> <span class="fu">nn_function</span>(<span class="fu">st_coordinates</span>(hh_tract), </span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">st_coordinates</span>(Crime), <span class="at">k =</span> <span class="dv">2</span>), </span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">crime_nn3 =</span> <span class="fu">nn_function</span>(<span class="fu">st_coordinates</span>(hh_tract), </span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">st_coordinates</span>(Crime), <span class="at">k =</span> <span class="dv">3</span>), </span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">crime_nn4 =</span> <span class="fu">nn_function</span>(<span class="fu">st_coordinates</span>(hh_tract), </span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">st_coordinates</span>(Crime), <span class="at">k =</span> <span class="dv">4</span>), </span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">crime_nn5 =</span> <span class="fu">nn_function</span>(<span class="fu">st_coordinates</span>(hh_tract), </span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">st_coordinates</span>(Crime), <span class="at">k =</span> <span class="dv">5</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="city-facilities-park-and-recreation-library-museum-and-zoo" class="level3">
<h3 class="anchored" data-anchor-id="city-facilities-park-and-recreation-library-museum-and-zoo">City Facilities: Park and recreation, Library, Museum and zoo</h3>
<p>City facilities such as parks and recreation areas, libraries, museums, and zoos are essential amenities that can significantly influence the attractiveness and livability of a neighborhood. Homebuyers often value proximity to these facilities, as they contribute to a higher quality of life and a sense of community. So we further calculate the proximity of each house to these selected facilities with a buffer of 0.25 miles, which is a reasonable walking distance for residents to access these amenities. Then, we use knn approach again to assess how proximity to these city facilities may affect home values.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>CityFacilities <span class="ot">&lt;-</span> CityFacilities <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">filter</span>(ASSET_GROUP1 <span class="sc">==</span> <span class="st">"A11"</span> <span class="sc">|</span> ASSET_GROUP1 <span class="sc">==</span> <span class="st">"A18"</span> <span class="sc">|</span> ASSET_GROUP1 <span class="sc">==</span> <span class="st">"A8"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(geometry)<span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>hh_tract<span class="sc">$</span>facilities.Buffer <span class="ot">&lt;-</span> hh_tract <span class="sc">%&gt;%</span> </span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_buffer</span>(<span class="dv">1320</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aggregate</span>(<span class="fu">mutate</span>(CityFacilities, <span class="at">counter =</span> <span class="dv">1</span>),., sum) <span class="sc">%&gt;%</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pull</span>(counter)</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>hh_tract<span class="sc">$</span>facilities.Buffer[<span class="fu">is.na</span>(hh_tract<span class="sc">$</span>facilities.Buffer)] <span class="ot">&lt;-</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Nearest Neighbor Feature</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>hh_tract <span class="ot">&lt;-</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  hh_tract <span class="sc">%&gt;%</span> </span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">facilities_nn1 =</span> <span class="fu">nn_function</span>(<span class="fu">st_coordinates</span>(hh_tract), </span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">st_coordinates</span>(CityFacilities), <span class="at">k =</span> <span class="dv">1</span>),</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">facilities_nn2 =</span> <span class="fu">nn_function</span>(<span class="fu">st_coordinates</span>(hh_tract), </span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">st_coordinates</span>(CityFacilities), <span class="at">k =</span> <span class="dv">2</span>), </span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">facilities_nn3 =</span> <span class="fu">nn_function</span>(<span class="fu">st_coordinates</span>(hh_tract), </span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">st_coordinates</span>(CityFacilities), <span class="at">k =</span> <span class="dv">3</span>), </span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">facilities_nn4 =</span> <span class="fu">nn_function</span>(<span class="fu">st_coordinates</span>(hh_tract), </span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">st_coordinates</span>(CityFacilities), <span class="at">k =</span> <span class="dv">4</span>), </span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">facilities_nn5 =</span> <span class="fu">nn_function</span>(<span class="fu">st_coordinates</span>(hh_tract), </span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">st_coordinates</span>(CityFacilities), <span class="at">k =</span> <span class="dv">5</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>##Home Price Scatterplots The four graphs below represent four key dependent variables that broadly cover each aspect of a neighborhood in order to determine house prices. Interior condition represent directly the quality of house, relating highly to the house cost. As forthe number of crime in 0.25 miles surrounding house, representing the degree of security. And the number of ameneties like park represents the accessibility to the public service. Last but not least, the number of female who owned child in the tract where house locates indicates the potential demand for school in the area.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Home Features cor</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">st_drop_geometry</span>(hh_tract) <span class="sc">%&gt;%</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(sale_price, own_child_fe, crimes.Buffer_660, facilities.Buffer,interior_condition) <span class="sc">%&gt;%</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sale_price <span class="sc">&lt;=</span> <span class="dv">1000000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(Variable, Value, <span class="sc">-</span>sale_price) <span class="sc">%&gt;%</span> </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ggplot</span>(<span class="fu">aes</span>(Value, sale_price)) <span class="sc">+</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>     <span class="fu">geom_point</span>(<span class="at">size =</span> .<span class="dv">5</span>) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se=</span>F, <span class="at">colour =</span> <span class="st">"#FA7800"</span>) <span class="sc">+</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>     <span class="fu">facet_wrap</span>(<span class="sc">~</span>Variable, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>     <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"4 varialbes' correlation to sale price"</span>) <span class="sc">+</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>     <span class="fu">plotTheme</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="mid_initial_1010-copy-copy_files/figure-html/Correlation scatterplot-1.png" class="img-fluid" width="960"></p>
</div>
</div>
<p>##Correlation Test from Correlation Matrix A correlation matrix compares factors against one another to see how related they are at determining the others value. Each box presented can indicate whether there is a correlation (directly or inverse) or little relationship between them. We are able to see strong correlation between many factors. From the correlation matrix, we can find that the number of school, the number of crime in 400 meter range, the number of female owned children in the tract, the total poverty situation where the house located have a positive correlation to the house price; Median household income, median rent, median monthly house cost have a negative correlation to the house price. These high correlation performance will function as an important basis for the variable selection in the model for predicting house price.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>hh_tract_pre <span class="ot">&lt;-</span> hh_tract<span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(objectid,census_tract,GEOID,Total_Housing_Units))</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>numericVars <span class="ot">&lt;-</span> </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select_if</span>(<span class="fu">st_drop_geometry</span>(hh_tract_pre), is.numeric) <span class="sc">%&gt;%</span> <span class="fu">na.omit</span>()</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggcorrplot</span>(</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="fu">cor</span>(numericVars), <span class="dv">1</span>), </span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">p.mat =</span> <span class="fu">cor_pmat</span>(numericVars),</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">colors =</span> <span class="fu">c</span>(<span class="st">"#25CB10"</span>, <span class="st">"white"</span>, <span class="st">"#FA7800"</span>),</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">type=</span><span class="st">"lower"</span>,</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">insig =</span> <span class="st">"blank"</span>) <span class="sc">+</span>  </span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Correlation across numeric variables"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="mid_initial_1010-copy-copy_files/figure-html/correlation_matrix-1.png" class="img-fluid" width="1200"></p>
</div>
</div>
</section>
</section>
<section id="statistical-table-for-variable-selected" class="level2">
<h2 class="anchored" data-anchor-id="statistical-table-for-variable-selected">Statistical table for variable selected</h2>
<p>The model used for predicting house price contains variable including varibles in the table below. In detail, we use internal characteristics (interior_condition,number of bathrooms, number of bedrooms), public services (number of school in 0.5 miles, number of amenities in 0.5 miles, distance to commercial corridor) and social economic spatial structure (number of crime in 0.25 miles, poverty situation, public transit accessibility, number of female own children).</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>hh_model <span class="ot">&lt;-</span> <span class="fu">subset</span>(hh_tract,<span class="at">select =</span> <span class="fu">c</span>(<span class="st">'sale_price'</span>,<span class="st">'interior_condition'</span>,<span class="st">'number_of_bathrooms'</span>,<span class="st">'number_of_bedrooms'</span>,<span class="st">'school_1320'</span>,<span class="st">'crimes.Buffer_660'</span>,<span class="st">'own_child_fe'</span>,<span class="st">'TotalPoverty'</span>,<span class="st">'facilities.Buffer'</span>,<span class="st">'dis_cc'</span>,<span class="st">'no_pub_trans'</span>))</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sumtable</span>(hh_model,</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">summ=</span><span class="fu">c</span>(<span class="st">'min(x)'</span>,</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>                <span class="st">'mean(x)'</span>,</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>                <span class="st">'median(x)'</span>,</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>                <span class="st">'sd(x)'</span>,</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>                <span class="st">'pctile(x)[25]'</span>, </span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>                <span class="st">'pctile(x)[75]'</span>,</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>                <span class="st">'max(x)'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Summary Statistics</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Variable</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Min</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Mean</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Median</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Sd</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Pctile[25]</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Pctile[75]</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">sale_price</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">267494</td>
<td style="text-align: left;">225000</td>
<td style="text-align: left;">234256</td>
<td style="text-align: left;">135000</td>
<td style="text-align: left;">325000</td>
<td style="text-align: left;">4000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">interior_condition</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">3.7</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">0.83</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">number_of_bathrooms</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">1.1</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">0.66</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">number_of_bedrooms</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">2.6</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">1.2</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">school_1320</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">7.5</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">7.5</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">11</td>
<td style="text-align: left;">49</td>
</tr>
<tr class="even">
<td style="text-align: left;">crimes.Buffer_660</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">2.4</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">20</td>
</tr>
<tr class="odd">
<td style="text-align: left;">own_child_fe</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">406</td>
<td style="text-align: left;">305</td>
<td style="text-align: left;">363</td>
<td style="text-align: left;">118</td>
<td style="text-align: left;">604</td>
<td style="text-align: left;">1876</td>
</tr>
<tr class="even">
<td style="text-align: left;">TotalPoverty</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">1046</td>
<td style="text-align: left;">853</td>
<td style="text-align: left;">787</td>
<td style="text-align: left;">435</td>
<td style="text-align: left;">1475</td>
<td style="text-align: left;">4127</td>
</tr>
<tr class="odd">
<td style="text-align: left;">facilities.Buffer</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">4.7</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">7</td>
<td style="text-align: left;">41</td>
</tr>
<tr class="even">
<td style="text-align: left;">dis_cc</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">672</td>
<td style="text-align: left;">548</td>
<td style="text-align: left;">639</td>
<td style="text-align: left;">217</td>
<td style="text-align: left;">957</td>
<td style="text-align: left;">7386</td>
</tr>
<tr class="odd">
<td style="text-align: left;">no_pub_trans</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">170</td>
<td style="text-align: left;">123</td>
<td style="text-align: left;">154</td>
<td style="text-align: left;">58</td>
<td style="text-align: left;">258</td>
<td style="text-align: left;">761</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="map-of-home-prices" class="level2">
<h2 class="anchored" data-anchor-id="map-of-home-prices">Map of Home Prices</h2>
<p>This map explores how home prices change in Philadelphia in 2021. We can see from the map that home prices are higher in the center city and outermost suburbs than in other areas.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>hh_tract <span class="ot">&lt;-</span> hh_tract <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sale_class =</span> <span class="fu">cut</span>(sale_price, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">20000</span>, <span class="dv">100000</span>, <span class="dv">200000</span>, <span class="dv">250000</span>,<span class="dv">400000</span>, <span class="fu">max</span>(hh_tract<span class="sc">$</span>sale_price, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))))</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nhoods, <span class="at">fill =</span> <span class="st">"grey80"</span>) <span class="sc">+</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> hh_tract, <span class="fu">aes</span>(<span class="at">colour =</span> <span class="fu">q5</span>(sale_class)), </span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">show.legend =</span> <span class="st">"point"</span>, <span class="at">size =</span> .<span class="dv">75</span>) <span class="sc">+</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> palette5,</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>                   <span class="at">labels=</span><span class="fu">c</span>(<span class="st">'0-$20k'</span>,<span class="st">'$20k-$100k'</span>, <span class="st">'$100k-$200k'</span>, <span class="st">'$200k-$250k'</span>, <span class="st">'$250k-$400k'</span>),</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>                   <span class="at">name=</span><span class="st">"Home Prices</span><span class="sc">\n</span><span class="st">($)"</span>) <span class="sc">+</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Sale Price, Philadelphia"</span>) <span class="sc">+</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mapTheme</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="mid_initial_1010-copy-copy_files/figure-html/price_map-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</section>
<section id="interesting-maps" class="level2">
<h2 class="anchored" data-anchor-id="interesting-maps">Interesting Maps</h2>
<section id="high-education-level-population-distribution" class="level3">
<h3 class="anchored" data-anchor-id="high-education-level-population-distribution">High Education Level Population Distribution</h3>
<p>The distribution of individuals with higher education closely mirrors the pattern of home prices. This demographic tends to reside predominantly in the city center or in the suburban areas on the outskirts of the city.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nhoods, <span class="at">fill =</span> <span class="st">"grey80"</span>) <span class="sc">+</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>hh_tract,<span class="fu">aes</span>(<span class="at">colour =</span> <span class="fu">q5</span>(Total_Graduate_Prof_Degree)), </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">show.legend =</span> <span class="st">"point"</span>, <span class="at">size =</span> .<span class="dv">75</span>) <span class="sc">+</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> palette5,</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">labels=</span><span class="fu">qBr</span>(hh_tract,<span class="st">"Total_Graduate_Prof_Degree"</span>),</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>                   <span class="at">name=</span><span class="st">"Population"</span>) <span class="sc">+</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Distribution of population with a high level of education, Philadelphia"</span>) <span class="sc">+</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="fu">mapTheme</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="mid_initial_1010-copy-copy_files/figure-html/income map-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</section>
<section id="facilities-density" class="level3">
<h3 class="anchored" data-anchor-id="facilities-density">Facilities Density</h3>
<p>Regarding facilities, a majority of them are concentrated in university city and the western part of the center city. This clustering is clearly visible and gradually extends outward toward the city’s periphery.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nhoods, <span class="at">fill =</span> <span class="st">"grey80"</span>) <span class="sc">+</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_density2d</span>(<span class="at">data =</span> <span class="fu">data.frame</span>(<span class="fu">st_coordinates</span>(CityFacilities)), </span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">aes</span>(X, Y, <span class="at">fill =</span> ..level.., <span class="at">alpha =</span> ..level..),</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">size =</span> <span class="fl">0.01</span>, <span class="at">bins =</span> <span class="dv">40</span>, <span class="at">geom =</span> <span class="st">'polygon'</span>) <span class="sc">+</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">"#25CB10"</span>, <span class="at">high =</span> <span class="st">"#FA7800"</span>, <span class="at">name =</span> <span class="st">"Density"</span>) <span class="sc">+</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_alpha</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="fl">0.00</span>, <span class="fl">0.35</span>), <span class="at">guide =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Density of City Facilities, Philadelphia"</span>) <span class="sc">+</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mapTheme</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="mid_initial_1010-copy-copy_files/figure-html/facilities density map-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</section>
<section id="private-school-density" class="level3">
<h3 class="anchored" data-anchor-id="private-school-density">Private School Density</h3>
<p>Private schools are concentrated in the center of the city and in the northwestern part of the city. The south-east corner and the south are relatively sparsely distributed.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nhoods, <span class="at">fill =</span> <span class="st">"grey80"</span>) <span class="sc">+</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_density2d</span>(<span class="at">data =</span> <span class="fu">data.frame</span>(<span class="fu">st_coordinates</span>(School_Private)), </span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">aes</span>(X, Y, <span class="at">fill =</span> ..level.., <span class="at">alpha =</span> ..level..),</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">size =</span> <span class="fl">0.01</span>, <span class="at">bins =</span> <span class="dv">40</span>, <span class="at">geom =</span> <span class="st">'polygon'</span>) <span class="sc">+</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">"#25CB10"</span>, <span class="at">high =</span> <span class="st">"#FA7800"</span>, <span class="at">name =</span> <span class="st">"Density"</span>) <span class="sc">+</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_alpha</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="fl">0.00</span>, <span class="fl">0.35</span>), <span class="at">guide =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Density of Private Schools, Philadelphia"</span>) <span class="sc">+</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mapTheme</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="mid_initial_1010-copy-copy_files/figure-html/private school map-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</section>
<section id="assault-density" class="level3">
<h3 class="anchored" data-anchor-id="assault-density">Assault Density</h3>
<p>Regarding the concentration of aggravated assaults, there are two distinct areas of concern. One is located to the west of University City, and the other is situated to the north of Center City. In these areas, both property sale prices and educational attainment levels among residents tend to be relatively low.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nhoods, <span class="at">fill =</span> <span class="st">"grey80"</span>) <span class="sc">+</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_density2d</span>(<span class="at">data =</span> <span class="fu">data.frame</span>(<span class="fu">st_coordinates</span>(Crime)), </span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">aes</span>(X, Y, <span class="at">fill =</span> ..level.., <span class="at">alpha =</span> ..level..),</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">size =</span> <span class="fl">0.01</span>, <span class="at">bins =</span> <span class="dv">40</span>, <span class="at">geom =</span> <span class="st">'polygon'</span>) <span class="sc">+</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">"#25CB10"</span>, <span class="at">high =</span> <span class="st">"#FA7800"</span>, <span class="at">name =</span> <span class="st">"Density"</span>) <span class="sc">+</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_alpha</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="fl">0.00</span>, <span class="fl">0.35</span>), <span class="at">guide =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Density of Aggravated Assaults, Philadelphia"</span>) <span class="sc">+</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mapTheme</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="mid_initial_1010-copy-copy_files/figure-html/assault density-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</section>
</section>
</section>
<section id="data-modeling" class="level1">
<h1>Data Modeling</h1>
<section id="table-of-results-training" class="level2">
<h2 class="anchored" data-anchor-id="table-of-results-training">Table of Results (Training)</h2>
<p>We have decided on a filtered list of key dependent variables to use to predict home values. Those factors being the following: interior condition, number of bathrooms, number of bedrooms, number of school in 0.5 miles, number of crime in 0.25 miles, number of female who own child in the tract, total poverty number, number of ameneties like parks in 0.5 miles, distance to commercial corridor, and the number of no public transportation access in the tract.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>inTrain <span class="ot">&lt;-</span> <span class="fu">createDataPartition</span>(</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">y =</span> <span class="fu">paste</span>(hh_tract<span class="sc">$</span>name), </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">p =</span> .<span class="dv">60</span>, <span class="at">list =</span> <span class="cn">FALSE</span>)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>p.training <span class="ot">&lt;-</span> hh_tract[inTrain,] </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>p.test <span class="ot">&lt;-</span> hh_tract[<span class="sc">-</span>inTrain,]  </span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>indpdt_var <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'sale_price'</span>,<span class="st">'interior_condition'</span>,<span class="st">'number_of_bathrooms'</span>,<span class="st">'number_of_bedrooms'</span>,<span class="st">'school_1320'</span>,<span class="st">'crimes.Buffer_660'</span>,<span class="st">'own_child_fe'</span>,<span class="st">'TotalPoverty'</span>,<span class="st">'facilities.Buffer'</span>,<span class="st">'dis_cc'</span>,<span class="st">'no_pub_trans'</span>)</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>reg.training <span class="ot">&lt;-</span> </span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm</span>(sale_price <span class="sc">~</span> ., <span class="at">data =</span> <span class="fu">as.data.frame</span>(p.training) <span class="sc">%&gt;%</span> </span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>                        dplyr<span class="sc">::</span><span class="fu">select</span>(indpdt_var))</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(reg.training)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = sale_price ~ ., data = as.data.frame(p.training) %&gt;% 
    dplyr::select(indpdt_var))

Residuals:
    Min      1Q  Median      3Q     Max 
-526125  -92091  -25235   50473 3610064 

Coefficients:
                      Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)         520752.789  10129.071  51.412  &lt; 2e-16 ***
interior_condition  -49177.410   2205.268 -22.300  &lt; 2e-16 ***
number_of_bathrooms 108131.439   3519.572  30.723  &lt; 2e-16 ***
number_of_bedrooms  -26261.869   1791.348 -14.660  &lt; 2e-16 ***
school_1320          -5962.815    464.716 -12.831  &lt; 2e-16 ***
crimes.Buffer_660    -6468.748   1374.538  -4.706 2.55e-06 ***
own_child_fe           -92.871      8.326 -11.154  &lt; 2e-16 ***
TotalPoverty           -32.183      3.851  -8.357  &lt; 2e-16 ***
facilities.Buffer     2118.017    341.230   6.207 5.55e-10 ***
dis_cc                 -12.538      2.674  -4.688 2.78e-06 ***
no_pub_trans            53.351     12.558   4.248 2.17e-05 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 193200 on 13990 degrees of freedom
Multiple R-squared:  0.3476,    Adjusted R-squared:  0.3471 
F-statistic: 745.4 on 10 and 13990 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
</section>
<section id="table-of-goodness-of-fit" class="level2">
<h2 class="anchored" data-anchor-id="table-of-goodness-of-fit">Table of Goodness of Fit</h2>
<p>n this phase of the process, we are currently training the model to predict housing prices. We have supplied the model with data points, each accompanied by its respective set of attributes linked to the sale price. The model learns the relationship between these attributes and sale prices, subsequently generating its own set of predicted values when presented with new data. The table presented below demonstrates the disparities between the model’s predictions and the actual values, quantified as their absolute errors. Given that we are dealing with substantial-value assets, such as housing, the differences between the model’s predictions and the actual values can be substantial. Additionally, it is equally crucial to assess these discrepancies in terms of percentage values to gauge the relative magnitude of the disparities.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>p.test <span class="ot">&lt;-</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  p.test <span class="sc">%&gt;%</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Regression =</span> <span class="st">"Baseline Regression"</span>,</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">sale_price.Predict =</span> <span class="fu">predict</span>(reg.training, p.test),</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">sale_price.Error =</span> sale_price.Predict <span class="sc">-</span> sale_price,</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">sale_price.AbsError =</span> <span class="fu">abs</span>(sale_price.Predict <span class="sc">-</span> sale_price),</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">sale_price.APE =</span> (<span class="fu">abs</span>(sale_price.Predict <span class="sc">-</span> sale_price)) <span class="sc">/</span> sale_price.Predict)<span class="sc">%&gt;%</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sale_price <span class="sc">&lt;</span> <span class="dv">5000000</span>) </span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>p.test <span class="sc">%&gt;%</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>   <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">MAE =</span> <span class="fu">mean</span>(sale_price.AbsError),</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">MAPE =</span> <span class="fu">abs</span>(<span class="fu">mean</span>(sale_price.APE)<span class="sc">*</span><span class="dv">100</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>(<span class="at">col.name=</span><span class="fu">c</span>(<span class="st">'Mean Absolute Error'</span>,<span class="st">'Mean Absolute Percentage Error'</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-classic table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">Mean Absolute Error</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Mean Absolute Percentage Error</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">105953.8</td>
<td style="text-align: right;">41.75261</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="cross-validation" class="level2">
<h2 class="anchored" data-anchor-id="cross-validation">cross validation</h2>
<p>Up to this point, our analysis has been primarily centered on a single training and test dataset. To evaluate the model’s capacity to generalize to new data, it’s essential to employ a repeated modeling approach involving multiple runs with varying training datasets. This methodology is known as K-Fold Cross Validation, and it entails partitioning the data into 100 distinct training datasets. Each training dataset omits a different set of home sales data points, which are subsequently utilized to assess the model’s error. The following scatter plot illustrates a histogram representing the Mean Absolute Error (MAE) across all 100 analyses. The MAE ranges from $80,000 to $130,000. The distribution of these MAEs closely approximates a normal distribution, with a prominent peak around $100,000. Despite a degree of inaccuracy, this observation suggests that the model exhibits generalizability and consistently yields results when confronted with various training data.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>fitControl <span class="ot">&lt;-</span> <span class="fu">trainControl</span>(<span class="at">method =</span> <span class="st">"cv"</span>, <span class="at">number =</span> <span class="dv">100</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">825</span>)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>reg.cv <span class="ot">&lt;-</span> </span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">train</span>(sale_price <span class="sc">~</span> ., <span class="at">data =</span> <span class="fu">st_drop_geometry</span>(hh_tract) <span class="sc">%&gt;%</span> </span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>          dplyr<span class="sc">::</span><span class="fu">select</span>(indpdt_var), </span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">trControl =</span> fitControl, <span class="at">na.action =</span> na.pass)</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(reg.cv<span class="sc">$</span>resample, <span class="fu">aes</span>(<span class="at">x=</span>MAE)) <span class="sc">+</span> </span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">color=</span><span class="st">'white'</span>,<span class="at">fill=</span><span class="st">"orange"</span>,<span class="at">bins=</span><span class="dv">100</span>)<span class="sc">+</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">150000</span>),<span class="at">breaks=</span><span class="fu">c</span>(<span class="dv">25000</span>,<span class="dv">50000</span>,<span class="dv">75000</span>,<span class="dv">100000</span>,<span class="dv">125000</span>,<span class="dv">150000</span>))<span class="sc">+</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">8</span>,<span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="mid_initial_1010-copy-copy_files/figure-html/cross_validation-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="plot-predicted-prices" class="level2">
<h2 class="anchored" data-anchor-id="plot-predicted-prices">Plot Predicted Prices</h2>
<p>The graph presented below illustrates the disparity between our predictive model and the concept of “perfect predictions,” where 100% accuracy is attained. Across the majority of clusters, our model aligns closely with the line of perfection, indicating its overall accuracy. However, when dealing with a smaller number of high-value homes, especially those exceeding $2 million, the model exhibits a tendency to undervalue their worth. Another noteworthy limitation of the model is the presence of negative results. Multiple data points fall below the (0,0) point, indicating that the model predicts a negative value for certain homes, despite their actual sales prices being positive integers. Strikingly, the model appears to slightly overestimate the values of these homes, as evidenced by the model prediction line (in green) surpassing the line of perfection. This observation could serve as an indicator of properties that require significant investment in maintenance or are in such poor condition that the cost of repairs surpasses the purchase price, categorizing them as potential “fixer-upper” candidates.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>p.test <span class="sc">%&gt;%</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(sale_price.Predict, sale_price) <span class="sc">%&gt;%</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(sale_price, sale_price.Predict)) <span class="sc">+</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="fu">aes</span>(sale_price, sale_price), </span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">colour=</span><span class="st">"#FA7800"</span>) <span class="sc">+</span> </span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="fu">aes</span>(sale_price, sale_price.Predict), </span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">colour=</span><span class="st">"#25CB10"</span>) <span class="sc">+</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Predicted sale price as a function of observed price"</span>,</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span><span class="st">"Orange line represents a perfect prediction; Green line represents prediction"</span>) <span class="sc">+</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plotTheme</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="mid_initial_1010-copy-copy_files/figure-html/price prediction-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="spatial-pattern-of-errors" class="level1">
<h1>Spatial Pattern of Errors</h1>
<section id="map-of-residual-errors" class="level2">
<h2 class="anchored" data-anchor-id="map-of-residual-errors">Map of Residual Errors</h2>
<p>The map presented below provides a visual representation of the absolute margin of error associated with each sales price prediction. The majority of errors fall within the range of plus or minus $50,000. However, it’s important to note that there are distinct areas with more substantial errors, particularly in the northwest, where higher-value homes are located. This underscores the model’s consistent tendency to underestimate the values of these high-end properties.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>p.test <span class="ot">&lt;-</span> p.test <span class="sc">%&gt;%</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">spErrorClass =</span> <span class="fu">cut</span>(sale_price.Error, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="fu">min</span>(p.test<span class="sc">$</span>sale_price.Error, <span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">100000</span>, <span class="sc">-</span><span class="dv">50000</span>, <span class="dv">50000</span>, <span class="dv">100000</span>, <span class="fu">max</span>(p.test<span class="sc">$</span>sale_price.Error, <span class="at">na.rm=</span><span class="cn">TRUE</span>))))</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data=</span>nhoods,<span class="at">fill=</span><span class="st">'grey80'</span>,<span class="at">color=</span><span class="st">'transparent'</span>)<span class="sc">+</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data=</span>p.test, <span class="at">size=</span><span class="fl">0.5</span>,<span class="fu">aes</span>(<span class="at">colour =</span> spErrorClass))<span class="sc">+</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data=</span>nhoods,<span class="at">fill=</span><span class="st">'transparent'</span>,<span class="at">color=</span><span class="st">'black'</span>)<span class="sc">+</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> palette5,</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>                    <span class="at">name =</span> <span class="st">"Sale Price Error Margins"</span>,</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">na.value =</span> <span class="st">'grey80'</span>,</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">'Less than -100,000'</span>, <span class="st">'-100,000 to -50,000'</span>, <span class="st">'-50,000 to 50,000'</span>, <span class="st">'50,001 - 100,000'</span>,<span class="st">'More than 100,000'</span>))<span class="sc">+</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mapTheme</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="mid_initial_1010-copy-copy_files/figure-html/Resdiuals Map of Test Set-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="spatial-lag-analysis" class="level2">
<h2 class="anchored" data-anchor-id="spatial-lag-analysis">Spatial Lag Analysis</h2>
<p>Analyzing the residuals map displayed above, we can observe a pattern of spatial clustering in the residuals. To further investigate this, we assess whether there’s a similarity between our predicted values and the predicted values of nearby homes. To do this, we employ a spatial lag calculation, which involves computing the spatial lag as the weighted sum of values from neighboring locations. The scatter plot below juxtaposes the sales price error for each home in our model against the spatial lag error for sales price, which is calculated based on the average error of the five nearest neighbors. The points in the scatter plot exhibit clustering, signifying that our model generally predicts similar errors for a home and its five nearest neighboring homes. The blue line on the plot represents the regression line, indicating this spatial similarity in error predictions.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>coords.test <span class="ot">&lt;-</span>  <span class="fu">st_coordinates</span>(p.test) </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>neighborList.test <span class="ot">&lt;-</span> <span class="fu">knn2nb</span>(<span class="fu">knearneigh</span>(coords.test, <span class="dv">5</span>))</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>spatialWeights.test <span class="ot">&lt;-</span> <span class="fu">nb2listw</span>(neighborList.test, <span class="at">style=</span><span class="st">"W"</span>)</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>p.test <span class="sc">%&gt;%</span> </span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lagPriceError =</span> <span class="fu">lag.listw</span>(spatialWeights.test, sale_price.Error)) <span class="sc">%&gt;%</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span>lagPriceError, <span class="at">y =</span>sale_price.Error)) <span class="sc">+</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="fu">aes</span>(lagPriceError, sale_price.Error), </span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>             <span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">colour=</span><span class="st">"blue"</span>)<span class="sc">+</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">1000000</span>,<span class="dv">1000000</span>)<span class="sc">+</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="sc">-</span><span class="dv">1000000</span>,<span class="dv">1000000</span>)<span class="sc">+</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plotTheme</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="mid_initial_1010-copy-copy_files/figure-html/spatial lag analysis-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="moran-i-test" class="level2">
<h2 class="anchored" data-anchor-id="moran-i-test">Moran I test</h2>
<p>Moran’s I is a measurement in statistics that evaluates the tendency for data points with similar values to occur near one another. Similar to Nearest Neighbor, to statistically prove that houses spatially close to each other would have similar sale prices. This type of measurement helps us identify high and low value clusters (i.e different neighborhoods and their perceived value). In the graph below, you can observe a relatively narrow distribution in gray, which represents the counts of houses and their sale prices used in our regression model. The orange line corresponds to the Moran’s I value, which serves to assess whether there is a correlation between property value and location. The observed Moran’s I stands at approximately 0.4, a statistically significant value indicating a correlated spatial distribution of property values.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>moranTest <span class="ot">&lt;-</span> <span class="fu">moran.mc</span>(p.test<span class="sc">$</span>sale_price.Error, </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>                      spatialWeights.test, <span class="at">nsim =</span> <span class="dv">999</span>)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">as.data.frame</span>(moranTest<span class="sc">$</span>res[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">999</span>)]), <span class="fu">aes</span>(moranTest<span class="sc">$</span>res[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">999</span>)])) <span class="sc">+</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">0.01</span>) <span class="sc">+</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept =</span> moranTest<span class="sc">$</span>statistic), <span class="at">colour =</span> <span class="st">"#FA7800"</span>,<span class="at">size=</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Observed and permuted Moran's I"</span>,</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"Observed Moran's I in orange"</span>,</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">"Moran's I"</span>,</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">"Count"</span>) <span class="sc">+</span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plotTheme</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="mid_initial_1010-copy-copy_files/figure-html/moran test-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="predicted-values-for-where-topredict-is-both-modelling-and-challenge." class="level1">
<h1>Predicted values for where ‘toPredict’ is both “MODELLING” and “CHALLENGE”.</h1>
<p>We aimed to compare our modeling dataset against the “challenge” dataset, which encompasses specific houses for which we needed to make predictions. The modeling map displays the houses we employed to train the model on how to predict various sales prices, even when those houses already had existing sale prices. The model subsequently began predicting values based on this modeling data, and the outcomes are depicted below. For the “challenge” dataset, the model lacked any pre-existing sales prices to reference. As a result, we now observe the predicted sales prices generated by the model for this set of data. Comparing the maps to each other, the challenge houses reflects the modelling sets through what would otherwise be the entire neighborhood. This parallel between the two maps prove that the challenge set is consistent with the predicted house prices used in the model and therefore can reasonably predict home values without the need of any previous sale price.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>hh_tract <span class="ot">&lt;-</span> hh_tract <span class="sc">%&gt;%</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sale_price.Predict =</span> <span class="fu">predict</span>(reg.training, hh_tract))</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a> <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_sf</span>(<span class="at">data=</span>nhoods,<span class="at">fill=</span><span class="st">'grey80'</span>,<span class="at">color=</span><span class="st">'transparent'</span>)<span class="sc">+</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_sf</span>(<span class="at">data=</span>hh_tract, <span class="at">size =</span> <span class="dv">1</span>, <span class="fu">aes</span>(<span class="at">color=</span> <span class="fu">q5</span>(sale_price.Predict)))<span class="sc">+</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>   <span class="fu">facet_wrap</span>(<span class="sc">~</span>toPredict)<span class="sc">+</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_color_viridis_d</span>(<span class="at">labels=</span><span class="fu">qBr</span>(hh_tract,<span class="st">"sale_price.Predict"</span>),</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>                   <span class="at">name=</span><span class="st">"Quintile</span><span class="sc">\n</span><span class="st">Breaks"</span>) <span class="sc">+</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a> <span class="fu">mapTheme</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="mid_initial_1010-copy-copy_files/figure-html/final price prediction-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="predictions-by-neighborhood" class="level2">
<h2 class="anchored" data-anchor-id="predictions-by-neighborhood">Predictions by neighborhood</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>p.test <span class="sc">%&gt;%</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(name) <span class="sc">%&gt;%</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">meanPrediction =</span> <span class="fu">mean</span>(sale_price.Predict),</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">meanPrice =</span> <span class="fu">mean</span>(sale_price)) <span class="sc">%&gt;%</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">kable</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">name</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">meanPrediction</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">meanPrice</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ACADEMY_GARDENS</td>
<td style="text-align: right;">313183.0979</td>
<td style="text-align: right;">295419.05</td>
</tr>
<tr class="even">
<td style="text-align: left;">ALLEGHENY_WEST</td>
<td style="text-align: right;">143262.5034</td>
<td style="text-align: right;">85687.48</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ANDORRA</td>
<td style="text-align: right;">404836.8861</td>
<td style="text-align: right;">402793.75</td>
</tr>
<tr class="even">
<td style="text-align: left;">ASTON_WOODBRIDGE</td>
<td style="text-align: right;">238714.9852</td>
<td style="text-align: right;">287096.43</td>
</tr>
<tr class="odd">
<td style="text-align: left;">BARTRAM_VILLAGE</td>
<td style="text-align: right;">161179.3921</td>
<td style="text-align: right;">95744.44</td>
</tr>
<tr class="even">
<td style="text-align: left;">BELLA_VISTA</td>
<td style="text-align: right;">424206.4508</td>
<td style="text-align: right;">555164.58</td>
</tr>
<tr class="odd">
<td style="text-align: left;">BELMONT</td>
<td style="text-align: right;">70926.0714</td>
<td style="text-align: right;">138405.88</td>
</tr>
<tr class="even">
<td style="text-align: left;">BREWERYTOWN</td>
<td style="text-align: right;">221028.3352</td>
<td style="text-align: right;">228589.87</td>
</tr>
<tr class="odd">
<td style="text-align: left;">BRIDESBURG</td>
<td style="text-align: right;">312132.0606</td>
<td style="text-align: right;">200516.32</td>
</tr>
<tr class="even">
<td style="text-align: left;">BURHOLME</td>
<td style="text-align: right;">255146.4259</td>
<td style="text-align: right;">260000.00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">BUSTLETON</td>
<td style="text-align: right;">332599.6579</td>
<td style="text-align: right;">378614.59</td>
</tr>
<tr class="even">
<td style="text-align: left;">BYBERRY</td>
<td style="text-align: right;">545885.7394</td>
<td style="text-align: right;">361250.00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CALLOWHILL</td>
<td style="text-align: right;">325057.0376</td>
<td style="text-align: right;">287500.00</td>
</tr>
<tr class="even">
<td style="text-align: left;">CARROLL_PARK</td>
<td style="text-align: right;">86130.0904</td>
<td style="text-align: right;">119115.04</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CEDARBROOK</td>
<td style="text-align: right;">380714.4444</td>
<td style="text-align: right;">264435.45</td>
</tr>
<tr class="even">
<td style="text-align: left;">CEDAR_PARK</td>
<td style="text-align: right;">296317.5155</td>
<td style="text-align: right;">461459.71</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CHESTNUT_HILL</td>
<td style="text-align: right;">425388.0109</td>
<td style="text-align: right;">969235.33</td>
</tr>
<tr class="even">
<td style="text-align: left;">CLEARVIEW</td>
<td style="text-align: right;">286770.5611</td>
<td style="text-align: right;">157350.55</td>
</tr>
<tr class="odd">
<td style="text-align: left;">COBBS_CREEK</td>
<td style="text-align: right;">183882.6411</td>
<td style="text-align: right;">172067.12</td>
</tr>
<tr class="even">
<td style="text-align: left;">CRESCENTVILLE</td>
<td style="text-align: right;">134613.7655</td>
<td style="text-align: right;">204950.00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DEARNLEY_PARK</td>
<td style="text-align: right;">359261.3186</td>
<td style="text-align: right;">347276.92</td>
</tr>
<tr class="even">
<td style="text-align: left;">DICKINSON_NARROWS</td>
<td style="text-align: right;">375879.7875</td>
<td style="text-align: right;">357342.44</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DUNLAP</td>
<td style="text-align: right;">96908.1346</td>
<td style="text-align: right;">150812.50</td>
</tr>
<tr class="even">
<td style="text-align: left;">EASTWICK</td>
<td style="text-align: right;">299900.8238</td>
<td style="text-align: right;">234138.38</td>
</tr>
<tr class="odd">
<td style="text-align: left;">EAST_FALLS</td>
<td style="text-align: right;">378336.5519</td>
<td style="text-align: right;">415235.30</td>
</tr>
<tr class="even">
<td style="text-align: left;">EAST_KENSINGTON</td>
<td style="text-align: right;">334676.6554</td>
<td style="text-align: right;">356702.21</td>
</tr>
<tr class="odd">
<td style="text-align: left;">EAST_OAK_LANE</td>
<td style="text-align: right;">335013.8912</td>
<td style="text-align: right;">263622.78</td>
</tr>
<tr class="even">
<td style="text-align: left;">EAST_PARKSIDE</td>
<td style="text-align: right;">164238.4397</td>
<td style="text-align: right;">101331.25</td>
</tr>
<tr class="odd">
<td style="text-align: left;">EAST_PASSYUNK</td>
<td style="text-align: right;">359417.6703</td>
<td style="text-align: right;">369944.58</td>
</tr>
<tr class="even">
<td style="text-align: left;">EAST_POPLAR</td>
<td style="text-align: right;">343215.7361</td>
<td style="text-align: right;">167666.67</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ELMWOOD</td>
<td style="text-align: right;">179091.8888</td>
<td style="text-align: right;">122608.90</td>
</tr>
<tr class="even">
<td style="text-align: left;">FAIRHILL</td>
<td style="text-align: right;">127209.7276</td>
<td style="text-align: right;">50076.19</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FAIRMOUNT</td>
<td style="text-align: right;">423069.9158</td>
<td style="text-align: right;">439904.62</td>
</tr>
<tr class="even">
<td style="text-align: left;">FELTONVILLE</td>
<td style="text-align: right;">161175.8784</td>
<td style="text-align: right;">120185.00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FERN_ROCK</td>
<td style="text-align: right;">249766.4411</td>
<td style="text-align: right;">172133.90</td>
</tr>
<tr class="even">
<td style="text-align: left;">FISHTOWN</td>
<td style="text-align: right;">389084.2584</td>
<td style="text-align: right;">384590.11</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FITLER_SQUARE</td>
<td style="text-align: right;">465778.4266</td>
<td style="text-align: right;">939325.00</td>
</tr>
<tr class="even">
<td style="text-align: left;">FOX_CHASE</td>
<td style="text-align: right;">303742.2368</td>
<td style="text-align: right;">315408.45</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FRANCISVILLE</td>
<td style="text-align: right;">464114.1133</td>
<td style="text-align: right;">493279.24</td>
</tr>
<tr class="even">
<td style="text-align: left;">FRANKFORD</td>
<td style="text-align: right;">152700.8349</td>
<td style="text-align: right;">127409.52</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FRANKLINVILLE</td>
<td style="text-align: right;">112733.8112</td>
<td style="text-align: right;">74028.30</td>
</tr>
<tr class="even">
<td style="text-align: left;">GARDEN_COURT</td>
<td style="text-align: right;">387127.4591</td>
<td style="text-align: right;">461555.56</td>
</tr>
<tr class="odd">
<td style="text-align: left;">GERMANTOWN_EAST</td>
<td style="text-align: right;">208372.2991</td>
<td style="text-align: right;">145838.43</td>
</tr>
<tr class="even">
<td style="text-align: left;">GERMANTOWN_MORTON</td>
<td style="text-align: right;">194672.2474</td>
<td style="text-align: right;">163134.39</td>
</tr>
<tr class="odd">
<td style="text-align: left;">GERMANTOWN_PENN_KNOX</td>
<td style="text-align: right;">295326.2061</td>
<td style="text-align: right;">322985.71</td>
</tr>
<tr class="even">
<td style="text-align: left;">GERMANTOWN_SOUTHWEST</td>
<td style="text-align: right;">210599.1570</td>
<td style="text-align: right;">186343.46</td>
</tr>
<tr class="odd">
<td style="text-align: left;">GERMANTOWN_WESTSIDE</td>
<td style="text-align: right;">290993.2816</td>
<td style="text-align: right;">171366.67</td>
</tr>
<tr class="even">
<td style="text-align: left;">GERMANTOWN_WEST_CENT</td>
<td style="text-align: right;">328969.3698</td>
<td style="text-align: right;">388359.21</td>
</tr>
<tr class="odd">
<td style="text-align: left;">GERMANY_HILL</td>
<td style="text-align: right;">471398.6431</td>
<td style="text-align: right;">405656.67</td>
</tr>
<tr class="even">
<td style="text-align: left;">GIRARD_ESTATES</td>
<td style="text-align: right;">329667.4836</td>
<td style="text-align: right;">305383.72</td>
</tr>
<tr class="odd">
<td style="text-align: left;">GLENWOOD</td>
<td style="text-align: right;">138715.1587</td>
<td style="text-align: right;">75405.88</td>
</tr>
<tr class="even">
<td style="text-align: left;">GRADUATE_HOSPITAL</td>
<td style="text-align: right;">458035.6063</td>
<td style="text-align: right;">583837.83</td>
</tr>
<tr class="odd">
<td style="text-align: left;">GRAYS_FERRY</td>
<td style="text-align: right;">205775.1777</td>
<td style="text-align: right;">180690.16</td>
</tr>
<tr class="even">
<td style="text-align: left;">GREENWICH</td>
<td style="text-align: right;">319151.8049</td>
<td style="text-align: right;">261468.00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HADDINGTON</td>
<td style="text-align: right;">112776.5640</td>
<td style="text-align: right;">115785.54</td>
</tr>
<tr class="even">
<td style="text-align: left;">HARROWGATE</td>
<td style="text-align: right;">23448.4356</td>
<td style="text-align: right;">87017.84</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HARTRANFT</td>
<td style="text-align: right;">165910.5410</td>
<td style="text-align: right;">105663.55</td>
</tr>
<tr class="even">
<td style="text-align: left;">HAVERFORD_NORTH</td>
<td style="text-align: right;">229810.6242</td>
<td style="text-align: right;">175756.56</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HAWTHORNE</td>
<td style="text-align: right;">460867.9722</td>
<td style="text-align: right;">592847.83</td>
</tr>
<tr class="even">
<td style="text-align: left;">HOLMESBURG</td>
<td style="text-align: right;">179673.9978</td>
<td style="text-align: right;">201102.94</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HUNTING_PARK</td>
<td style="text-align: right;">93308.9048</td>
<td style="text-align: right;">88302.09</td>
</tr>
<tr class="even">
<td style="text-align: left;">JUNIATA_PARK</td>
<td style="text-align: right;">151308.2529</td>
<td style="text-align: right;">154565.38</td>
</tr>
<tr class="odd">
<td style="text-align: left;">KINGSESSING</td>
<td style="text-align: right;">190626.0585</td>
<td style="text-align: right;">136016.08</td>
</tr>
<tr class="even">
<td style="text-align: left;">LAWNDALE</td>
<td style="text-align: right;">220614.3177</td>
<td style="text-align: right;">191576.50</td>
</tr>
<tr class="odd">
<td style="text-align: left;">LEXINGTON_PARK</td>
<td style="text-align: right;">308038.9044</td>
<td style="text-align: right;">307275.00</td>
</tr>
<tr class="even">
<td style="text-align: left;">LOGAN</td>
<td style="text-align: right;">188461.6980</td>
<td style="text-align: right;">142351.80</td>
</tr>
<tr class="odd">
<td style="text-align: left;">LOGAN_SQUARE</td>
<td style="text-align: right;">458097.3752</td>
<td style="text-align: right;">526992.71</td>
</tr>
<tr class="even">
<td style="text-align: left;">LOWER_MOYAMENSING</td>
<td style="text-align: right;">308267.2746</td>
<td style="text-align: right;">230304.63</td>
</tr>
<tr class="odd">
<td style="text-align: left;">LUDLOW</td>
<td style="text-align: right;">483012.1207</td>
<td style="text-align: right;">337166.67</td>
</tr>
<tr class="even">
<td style="text-align: left;">MANAYUNK</td>
<td style="text-align: right;">390439.6649</td>
<td style="text-align: right;">341272.40</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MANTUA</td>
<td style="text-align: right;">152824.5282</td>
<td style="text-align: right;">211866.67</td>
</tr>
<tr class="even">
<td style="text-align: left;">MAYFAIR</td>
<td style="text-align: right;">227137.0179</td>
<td style="text-align: right;">232220.42</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MCGUIRE</td>
<td style="text-align: right;">362.7725</td>
<td style="text-align: right;">65714.29</td>
</tr>
<tr class="even">
<td style="text-align: left;">MELROSE_PARK_GARDENS</td>
<td style="text-align: right;">299697.5821</td>
<td style="text-align: right;">177327.78</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MILLBROOK</td>
<td style="text-align: right;">324326.7602</td>
<td style="text-align: right;">282708.57</td>
</tr>
<tr class="even">
<td style="text-align: left;">MILL_CREEK</td>
<td style="text-align: right;">130311.2099</td>
<td style="text-align: right;">112055.30</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MODENA</td>
<td style="text-align: right;">316047.7297</td>
<td style="text-align: right;">295304.35</td>
</tr>
<tr class="even">
<td style="text-align: left;">MORRELL_PARK</td>
<td style="text-align: right;">324461.4553</td>
<td style="text-align: right;">294357.41</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MOUNT_AIRY_EAST</td>
<td style="text-align: right;">315985.8335</td>
<td style="text-align: right;">300325.22</td>
</tr>
<tr class="even">
<td style="text-align: left;">MOUNT_AIRY_WEST</td>
<td style="text-align: right;">379370.4600</td>
<td style="text-align: right;">492501.52</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NEWBOLD</td>
<td style="text-align: right;">340099.1481</td>
<td style="text-align: right;">303131.70</td>
</tr>
<tr class="even">
<td style="text-align: left;">NICETOWN</td>
<td style="text-align: right;">242050.5672</td>
<td style="text-align: right;">100662.50</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NORMANDY_VILLAGE</td>
<td style="text-align: right;">272431.1201</td>
<td style="text-align: right;">313958.33</td>
</tr>
<tr class="even">
<td style="text-align: left;">NORTHERN_LIBERTIES</td>
<td style="text-align: right;">442951.4148</td>
<td style="text-align: right;">635777.62</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NORTHWOOD</td>
<td style="text-align: right;">207580.7881</td>
<td style="text-align: right;">209995.89</td>
</tr>
<tr class="even">
<td style="text-align: left;">NORTH_CENTRAL</td>
<td style="text-align: right;">182149.7097</td>
<td style="text-align: right;">236589.42</td>
</tr>
<tr class="odd">
<td style="text-align: left;">OGONTZ</td>
<td style="text-align: right;">207642.8897</td>
<td style="text-align: right;">146244.57</td>
</tr>
<tr class="even">
<td style="text-align: left;">OLD_KENSINGTON</td>
<td style="text-align: right;">435858.7504</td>
<td style="text-align: right;">447569.44</td>
</tr>
<tr class="odd">
<td style="text-align: left;">OLNEY</td>
<td style="text-align: right;">168499.0692</td>
<td style="text-align: right;">144991.45</td>
</tr>
<tr class="even">
<td style="text-align: left;">OVERBROOK</td>
<td style="text-align: right;">270669.8751</td>
<td style="text-align: right;">206751.63</td>
</tr>
<tr class="odd">
<td style="text-align: left;">OXFORD_CIRCLE</td>
<td style="text-align: right;">233806.2729</td>
<td style="text-align: right;">216263.19</td>
</tr>
<tr class="even">
<td style="text-align: left;">PACKER_PARK</td>
<td style="text-align: right;">460367.1451</td>
<td style="text-align: right;">546490.27</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PARKWOOD_MANOR</td>
<td style="text-align: right;">318789.1952</td>
<td style="text-align: right;">282820.25</td>
</tr>
<tr class="even">
<td style="text-align: left;">PASCHALL</td>
<td style="text-align: right;">142326.2596</td>
<td style="text-align: right;">100835.42</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PASSYUNK_SQUARE</td>
<td style="text-align: right;">408431.2784</td>
<td style="text-align: right;">428459.33</td>
</tr>
<tr class="even">
<td style="text-align: left;">PENNSPORT</td>
<td style="text-align: right;">407954.5112</td>
<td style="text-align: right;">370430.30</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PENNYPACK</td>
<td style="text-align: right;">311989.9811</td>
<td style="text-align: right;">306320.60</td>
</tr>
<tr class="even">
<td style="text-align: left;">PENNYPACK_WOODS</td>
<td style="text-align: right;">312316.6692</td>
<td style="text-align: right;">261250.00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PENROSE</td>
<td style="text-align: right;">261804.8861</td>
<td style="text-align: right;">174590.91</td>
</tr>
<tr class="even">
<td style="text-align: left;">POINT_BREEZE</td>
<td style="text-align: right;">379799.7166</td>
<td style="text-align: right;">326131.41</td>
</tr>
<tr class="odd">
<td style="text-align: left;">POWELTON</td>
<td style="text-align: right;">257423.8048</td>
<td style="text-align: right;">380000.00</td>
</tr>
<tr class="even">
<td style="text-align: left;">QUEEN_VILLAGE</td>
<td style="text-align: right;">390044.9539</td>
<td style="text-align: right;">569240.86</td>
</tr>
<tr class="odd">
<td style="text-align: left;">RHAWNHURST</td>
<td style="text-align: right;">280825.4615</td>
<td style="text-align: right;">290088.18</td>
</tr>
<tr class="even">
<td style="text-align: left;">RICHMOND</td>
<td style="text-align: right;">229070.2879</td>
<td style="text-align: right;">182177.13</td>
</tr>
<tr class="odd">
<td style="text-align: left;">RITTENHOUSE</td>
<td style="text-align: right;">426305.8777</td>
<td style="text-align: right;">797764.54</td>
</tr>
<tr class="even">
<td style="text-align: left;">RIVERFRONT</td>
<td style="text-align: right;">374635.6916</td>
<td style="text-align: right;">441249.75</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ROXBOROUGH</td>
<td style="text-align: right;">373662.5460</td>
<td style="text-align: right;">320127.44</td>
</tr>
<tr class="even">
<td style="text-align: left;">ROXBOROUGH_PARK</td>
<td style="text-align: right;">411597.8106</td>
<td style="text-align: right;">527944.44</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SHARSWOOD</td>
<td style="text-align: right;">263195.6767</td>
<td style="text-align: right;">134937.50</td>
</tr>
<tr class="even">
<td style="text-align: left;">SOCIETY_HILL</td>
<td style="text-align: right;">417227.4487</td>
<td style="text-align: right;">730063.49</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SOMERTON</td>
<td style="text-align: right;">315262.2539</td>
<td style="text-align: right;">342732.68</td>
</tr>
<tr class="even">
<td style="text-align: left;">SOUTHWEST_SCHUYLKILL</td>
<td style="text-align: right;">183011.0433</td>
<td style="text-align: right;">135575.48</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SPRING_GARDEN</td>
<td style="text-align: right;">445306.9801</td>
<td style="text-align: right;">443212.10</td>
</tr>
<tr class="even">
<td style="text-align: left;">SPRUCE_HILL</td>
<td style="text-align: right;">378143.5800</td>
<td style="text-align: right;">610750.00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">STADIUM_DISTRICT</td>
<td style="text-align: right;">333811.5238</td>
<td style="text-align: right;">287570.59</td>
</tr>
<tr class="even">
<td style="text-align: left;">STANTON</td>
<td style="text-align: right;">58650.7560</td>
<td style="text-align: right;">87913.81</td>
</tr>
<tr class="odd">
<td style="text-align: left;">STRAWBERRY_MANSION</td>
<td style="text-align: right;">122640.1230</td>
<td style="text-align: right;">86970.56</td>
</tr>
<tr class="even">
<td style="text-align: left;">SUMMERDALE</td>
<td style="text-align: right;">185666.4741</td>
<td style="text-align: right;">164812.56</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TACONY</td>
<td style="text-align: right;">232639.7552</td>
<td style="text-align: right;">183643.01</td>
</tr>
<tr class="even">
<td style="text-align: left;">TIOGA</td>
<td style="text-align: right;">162364.3769</td>
<td style="text-align: right;">96660.98</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TORRESDALE</td>
<td style="text-align: right;">315534.0055</td>
<td style="text-align: right;">290113.20</td>
</tr>
<tr class="even">
<td style="text-align: left;">UPPER_KENSINGTON</td>
<td style="text-align: right;">11318.5677</td>
<td style="text-align: right;">64203.95</td>
</tr>
<tr class="odd">
<td style="text-align: left;">UPPER_ROXBOROUGH</td>
<td style="text-align: right;">356465.5292</td>
<td style="text-align: right;">364390.14</td>
</tr>
<tr class="even">
<td style="text-align: left;">WALNUT_HILL</td>
<td style="text-align: right;">246846.7255</td>
<td style="text-align: right;">286243.75</td>
</tr>
<tr class="odd">
<td style="text-align: left;">WASHINGTON_SQUARE</td>
<td style="text-align: right;">374948.3612</td>
<td style="text-align: right;">688845.96</td>
</tr>
<tr class="even">
<td style="text-align: left;">WEST_KENSINGTON</td>
<td style="text-align: right;">280537.5148</td>
<td style="text-align: right;">208440.23</td>
</tr>
<tr class="odd">
<td style="text-align: left;">WEST_OAK_LANE</td>
<td style="text-align: right;">242813.1915</td>
<td style="text-align: right;">198077.28</td>
</tr>
<tr class="even">
<td style="text-align: left;">WEST_PARKSIDE</td>
<td style="text-align: right;">250118.7184</td>
<td style="text-align: right;">163500.00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">WEST_PASSYUNK</td>
<td style="text-align: right;">241586.9338</td>
<td style="text-align: right;">198819.36</td>
</tr>
<tr class="even">
<td style="text-align: left;">WEST_POPLAR</td>
<td style="text-align: right;">321317.5687</td>
<td style="text-align: right;">407925.00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">WEST_POWELTON</td>
<td style="text-align: right;">246067.3835</td>
<td style="text-align: right;">253083.33</td>
</tr>
<tr class="even">
<td style="text-align: left;">WHITMAN</td>
<td style="text-align: right;">332864.5096</td>
<td style="text-align: right;">235917.81</td>
</tr>
<tr class="odd">
<td style="text-align: left;">WINCHESTER_PARK</td>
<td style="text-align: right;">343127.1764</td>
<td style="text-align: right;">317564.29</td>
</tr>
<tr class="even">
<td style="text-align: left;">WISSAHICKON</td>
<td style="text-align: right;">389331.6720</td>
<td style="text-align: right;">360597.92</td>
</tr>
<tr class="odd">
<td style="text-align: left;">WISSAHICKON_HILLS</td>
<td style="text-align: right;">334588.7911</td>
<td style="text-align: right;">368833.33</td>
</tr>
<tr class="even">
<td style="text-align: left;">WISSINOMING</td>
<td style="text-align: right;">201347.5909</td>
<td style="text-align: right;">166505.62</td>
</tr>
<tr class="odd">
<td style="text-align: left;">WISTER</td>
<td style="text-align: right;">175089.0203</td>
<td style="text-align: right;">132357.69</td>
</tr>
<tr class="even">
<td style="text-align: left;">WYNNEFIELD</td>
<td style="text-align: right;">242641.1852</td>
<td style="text-align: right;">217276.00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">WYNNEFIELD_HEIGHTS</td>
<td style="text-align: right;">314667.7244</td>
<td style="text-align: right;">160300.00</td>
</tr>
<tr class="even">
<td style="text-align: left;">YORKTOWN</td>
<td style="text-align: right;">254379.3574</td>
<td style="text-align: right;">272875.00</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
</section>
<section id="spatial-pattern-of-regression-by-neirbodhood" class="level1">
<h1>Spatial Pattern of Regression by Neirbodhood</h1>
<p>Irrespective of the model’s overall accuracy and its general capability to predict house prices, it’s crucial to recognize its weaknesses on a neighborhood-by-neighborhood basis. By doing so, we can gain insight into which areas the model tends to overestimate or underestimate. A prominent observation from the map is that the model’s most significant errors are concentrated in the lower-income north and east sections of the city. This suggests that the model is less accurate in these less desirable neighborhoods, where its predictions tend to be further from the actual values.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_drop_geometry</span>(p.test) <span class="sc">%&gt;%</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Regression, name) <span class="sc">%&gt;%</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean.MAPE =</span> <span class="fu">abs</span>(<span class="fu">mean</span>(sale_price.APE, <span class="at">na.rm =</span> T))) <span class="sc">%&gt;%</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(nhoods) <span class="sc">%&gt;%</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_sf</span>() <span class="sc">%&gt;%</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> mean.MAPE)) <span class="sc">+</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> palette5[<span class="dv">1</span>], <span class="at">high =</span> palette5[<span class="dv">5</span>],</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>                          <span class="at">name =</span> <span class="st">"Mean Absolute Percent Error"</span>) <span class="sc">+</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Mean test set MAPE by neighborhood"</span>) <span class="sc">+</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mapTheme</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="mid_initial_1010-copy-copy_files/figure-html/spatial pattern-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="scatterplot-plot-of-mape-by-neighborhood-as-a-function-of-mean-price-by-neighborhood." class="level1">
<h1>scatterplot plot of MAPE by neighborhood as a function of mean price by neighborhood.</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_drop_geometry</span>(p.test) <span class="sc">%&gt;%</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Regression, name) <span class="sc">%&gt;%</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean.MAPE =</span> <span class="fu">mean</span>(sale_price.APE, <span class="at">na.rm =</span> T), </span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">mean.sale_price =</span> <span class="fu">mean</span>(sale_price, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(nhoods) <span class="sc">%&gt;%</span> </span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span>mean.sale_price, <span class="at">y =</span>mean.MAPE))<span class="sc">+</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="fu">aes</span>(mean.sale_price, mean.MAPE), </span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">size =</span> .<span class="dv">5</span>, <span class="at">colour=</span><span class="st">"red"</span>)<span class="sc">+</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plotTheme</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="mid_initial_1010-copy-copy_files/figure-html/MAPE Scatter Plot-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="the-variable-split-by-census-groups" class="level1">
<h1>the variable Split by Census Groups</h1>
<p>These two maps show the significant income gap between races in Philadelphia. There is an evident parallel between higher income areas and fewer minority populations. There are many reasons historically, politically, and through socioeconomic that create and define these boundaries. But that is also exactly why incorporating race as a factor in the models prior were not recommended. Adding race to a model adds a cascading effect of discrimination that feeds future predictions to assume race is a pre-determined factor that effects house values. Race is only a factor in housing models because of historical systemic racism and discriminatory policies that created parallels between racial and economic disparity.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>tracts21 <span class="ot">&lt;-</span> </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_acs</span>(<span class="at">geography =</span> <span class="st">"tract"</span>, <span class="at">variables =</span> <span class="fu">c</span>(<span class="st">"B01001_001E"</span>,<span class="st">"B01001A_001E"</span>,<span class="st">"B06011_001"</span>), </span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">year =</span> <span class="dv">2021</span>, <span class="at">state=</span><span class="st">'PA'</span>, <span class="at">county=</span><span class="st">'Philadelphia'</span>, <span class="at">geometry=</span>T, <span class="at">output =</span> <span class="st">"wide"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="st">'ESRI:102728'</span>)  <span class="sc">%&gt;%</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">TotalPop =</span> B01001_001E,</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">NumberWhites =</span> B01001A_001E,</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">Median_Income =</span> B06011_001E) <span class="sc">%&gt;%</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percentWhite =</span> NumberWhites <span class="sc">/</span> TotalPop,</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">raceContext =</span> <span class="fu">ifelse</span>(percentWhite <span class="sc">&gt;</span> .<span class="dv">5</span>, <span class="st">"Majority White"</span>, <span class="st">"Majority Non-White"</span>),</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">incomeContext =</span> <span class="fu">ifelse</span>(Median_Income <span class="sc">&gt;</span> <span class="dv">32322</span>, <span class="st">"High Income"</span>, <span class="st">"Low Income"</span>))</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(<span class="at">ncol =</span> <span class="dv">2</span>,</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_sf</span>(<span class="at">data =</span> <span class="fu">na.omit</span>(tracts21), <span class="fu">aes</span>(<span class="at">fill =</span> raceContext)) <span class="sc">+</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#25CB10"</span>, <span class="st">"#FA7800"</span>), <span class="at">name=</span><span class="st">"Race Context"</span>) <span class="sc">+</span></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Race Context"</span>) <span class="sc">+</span></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mapTheme</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>), </span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_sf</span>(<span class="at">data =</span> <span class="fu">na.omit</span>(tracts21), <span class="fu">aes</span>(<span class="at">fill =</span> incomeContext)) <span class="sc">+</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#25CB10"</span>, <span class="st">"#FA7800"</span>), <span class="at">name=</span><span class="st">"Income Context"</span>) <span class="sc">+</span></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Income Context"</span>) <span class="sc">+</span></span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mapTheme</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="mid_initial_1010-copy-copy_files/figure-html/income&amp;race-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="accuracy-generalizability" class="level1">
<h1>Accuracy &amp; Generalizability</h1>
<p>The accuracy of the model is contingent on specific metrics tailored to the characteristics of Philadelphia. To scale the model for use in other cities, extensive research and data collection would be essential, especially regarding factors like school systems, crime statistics, and other external sources that might differ significantly across regions. While the quantity of data can enhance the accuracy of predictors, the quality of data, particularly data that pinpoints critical variables affecting home prices, is equally crucial for efficient model training. In terms of generalization, the model’s applicability may primarily extend to the Philadelphia region due to its familiarity with the local context and the specific dataset it was trained on. Incorporating data from locations beyond this region would likely lead to inaccuracies because of the varying local contexts and the need for entirely new datasets to capture the specific dynamics of those areas.</p>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>Based on our findings, we do not recommend widespread adoption of the model, primarily due to its inaccuracy in extreme situations. It’s apparent that the model’s limitations become most pronounced when dealing with exceptionally high or low house prices. However, our model has shed light on the importance of public services and security in influencing house prices, considering factors such as green space accessibility and distance to corridors. In the pursuit of fostering housing equity in Philadelphia, it is imperative to give due attention to equity in public resources. Nevertheless, we cannot disregard the model’s weakness in predicting areas where house prices are extremely high or low. It may be worthwhile to reconsider our approach when defining and handling “outliers.” Additionally, we should explore other variables that could better capture the features associated with higher or lower housing prices.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>